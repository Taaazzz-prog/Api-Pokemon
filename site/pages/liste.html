<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../src/css/styles.css" />
    <title>Pokemon au complet</title>
  </head>
  <body>
    <!-- En-t√™te avec la banni√®re -->
    <header>
      <!-- Banni√®re du site avec image -->
      <section class="banner">
        <img src="../assets/images/ui/banniere.png" alt="Banni√®re Pok√©mon" />
      </section>
    </header>
    
    <!-- Structure principale avec menu lat√©ral et contenu -->
    <div class="layout">
      <!-- Menu de navigation lat√©ral -->
      <nav class="navbar">
        <ul class="nav-links">
          <li><a class="btn" href="../index.html">Accueil</a></li>
          <li><a class="btn" href="./liste.html">Pok√©dex</a></li>
          <li><a class="btn" href="./generation.html">G√©n√©ration</a></li>
          <li>
            <button class="btn" id="compare-btn">
              <span class="compare-label">üîÑ Comparateur</span>
              <span class="compare-count" aria-live="polite">0</span>
            </button>
          </li>
          <li><button class="btn" id="history-btn">üìö Historique</button></li>
          <li class="nav-options">
            <button class="btn options-toggle" id="options-toggle" type="button" aria-expanded="false">‚öôÔ∏è Options</button>
            <div class="options-panel" id="options-panel" hidden>
              <div class="options-group">
                <h3>Affichage</h3>
                <div id="theme-toggle-slot"></div>
              </div>
              <div class="options-group">
                <h3>Favoris</h3>
                <p class="options-summary" id="favorites-summary">Aucun favori enregistr√©</p>
                <button class="btn btn-secondary options-open-favorites" id="favorites-btn" type="button">
                  <span>‚≠ê Ouvrir mes favoris</span>
                  <span class="options-badge" data-favorites-count>0</span>
                </button>
              </div>
            </div>
          </li>
        </ul>
      </nav>
      
      <!-- Contenu principal de la page Pok√©dex -->
      <main>
        <!-- Titre de la page -->
        <section id="main-header-slot" class="page-header"></section>
        
        <!-- Conteneur pour le menu de filtrage (rempli par JavaScript) -->
        <div id="menu-container" class="generation-menu"></div>
        
        <!-- Conteneur pour l'affichage de tous les Pok√©mon (rempli par JavaScript) -->
        <div id="pokemon-container" class="pokemon-grid"></div>

        <!-- Popup pour afficher les d√©tails d'un Pok√©mon (initialement cach√©) -->
        <div id="popup" class="popup">
          <!-- Contenu de la popup (rempli dynamiquement) -->
          <div id="popup-content" class="popup-content"></div>
          <!-- Bouton pour fermer la popup -->
          <button id="close-popup" class="close-popup">Fermer</button>
        </div>
      </main>
    </div>
    
    <!-- Pied de page -->
    <footer class="site-footer">
      <div class="footer-inner">
        <span class="footer-brand">¬© 2025 Le Repaire des Dresseurs</span>
        <nav class="footer-links" aria-label="Liens l√©gaux">
          <a href="#">Mentions l√©gales</a>
          <a href="#">Politique de confidentialit√©</a>
          <a href="#">Conditions d'utilisation</a>
          <a href="mailto:contact@pokedex.fr">Contact</a>
        </nav>
      </div>
      <p class="footer-note">Site non commercial r√©alis√© √† des fins p√©dagogiques. Donn√©es fournies par <a href="https://pokebuildapi.fr" target="_blank" rel="noopener">PokeBuild API</a>.</p>
    </footer>
    
    <!-- Scripts JavaScript -->
    <script src="../src/js/script.js"></script>
    <script src="../src/js/pokedex-header.js" type="module"></script>
    <script src="../src/js/modules/theme-manager.js"></script>
    <script src="../src/js/mobile-menu.js"></script>
    <script src="../src/js/pokemon-fallback-data.js"></script>
    <script src="../src/js/utils/lazy-load.js"></script>
    <script src="../src/js/utils/pagination.js"></script>
    <script src="../src/js/modules/favorites.js"></script>
    <script src="../src/js/options-panel.js"></script>
    <script src="../src/js/modules/advanced-search.js"></script>
    <script src="../src/js/modules/pokemon-comparator.js"></script>
    <script src="../src/js/modules/search-history.js"></script>
    <script src="../src/js/utils/image-optimizer.js"></script>
    <script src="../src/js/utils/asset-minifier.js"></script>
    <script src="../src/js/utils/cdn-manager.js"></script>
    <script src="../src/js/app-initializer.js"></script>
    <script src="../src/js/menu.js"></script>
    <script src="../src/js/asyncAwait.js"></script>
    
    <script>
      // Initialiser les boutons de navigation
      document.addEventListener('DOMContentLoaded', function() {
        // Attendre que tous les gestionnaires soient initialis√©s
        function initializeButtons() {
          // Bouton Favoris
          const favBtn = document.getElementById('favorites-btn');
          if (favBtn) {
            favBtn.addEventListener('click', () => {
              if (window.favoritesManager) {
                window.favoritesManager.showFavoritesModal();
              } else {
                console.warn('Gestionnaire de favoris non initialis√©');
              }
            });
          }
          
          // Bouton Comparateur
          const compareBtn = document.getElementById('compare-btn');
          if (compareBtn) {
            compareBtn.addEventListener('click', () => {
              if (window.pokemonComparator) {
                window.pokemonComparator.showModal();
              } else {
                console.warn('Comparateur non initialis√©');
              }
            });
          }
          
          // Bouton Historique
          const historyBtn = document.getElementById('history-btn');
          if (historyBtn) {
            historyBtn.addEventListener('click', () => {
              if (window.searchHistoryManager) {
                window.searchHistoryManager.showModal();
              } else {
                console.warn('Gestionnaire d\'historique non initialis√©');
              }
            });
          }
        }

        // Initialiser imm√©diatement et r√©essayer apr√®s un d√©lai
        initializeButtons();
        setTimeout(initializeButtons, 1000);
      });
    </script>
  </body>
</html>
