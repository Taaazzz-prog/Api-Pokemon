<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test des Nouvelles Fonctionnalit√©s - Pok√©dex</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .feature-test {
            margin: 20px auto;
            max-width: 800px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .test-button {
            display: inline-block;
            margin: 10px;
            padding: 15px 30px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .test-button:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }
        
        .feature-status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        
        .status-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="feature-test">
        <h1>üß™ Test des Nouvelles Fonctionnalit√©s</h1>
        <p>Testez les 5 nouvelles fonctionnalit√©s impl√©ment√©es :</p>
        
        <div class="feature-group">
            <h2>üîÑ Comparateur de Pok√©mon</h2>
            <button class="test-button" onclick="testComparator()">Tester le Comparateur</button>
            <div id="comparator-status" class="feature-status"></div>
        </div>
        
        <div class="feature-group">
            <h2>üìö Historique de Recherche</h2>
            <button class="test-button" onclick="testHistory()">Tester l'Historique</button>
            <div id="history-status" class="feature-status"></div>
        </div>
        
        <div class="feature-group">
            <h2>üñºÔ∏è Optimisation des Images</h2>
            <button class="test-button" onclick="testImageOptimization()">Tester l'Optimisation</button>
            <div id="image-status" class="feature-status"></div>
        </div>
        
        <div class="feature-group">
            <h2>üì¶ Minification des Assets</h2>
            <button class="test-button" onclick="testMinification()">Tester la Minification</button>
            <div id="minify-status" class="feature-status"></div>
        </div>
        
        <div class="feature-group">
            <h2>üåê CDN Manager</h2>
            <button class="test-button" onclick="testCDN()">Tester le CDN</button>
            <div id="cdn-status" class="feature-status"></div>
        </div>
        
        <div style="margin-top: 30px;">
            <h2>üìä √âtat G√©n√©ral</h2>
            <div id="general-status" class="feature-status">
                Cliquez sur les boutons pour tester chaque fonctionnalit√©.
            </div>
        </div>
        
        <div style="margin-top: 20px;">
            <button class="test-button" onclick="window.location.href='index.html'">
                ‚Üê Retour √† l'Accueil
            </button>
        </div>
    </div>

    <!-- Scripts n√©cessaires -->
    <script src="pokemon-fallback-data.js"></script>
    <script src="pokemon-comparator.js"></script>
    <script src="search-history.js"></script>
    <script src="image-optimizer.js"></script>
    <script src="asset-minifier.js"></script>
    <script src="cdn-manager.js"></script>
    
    <script>
        // Fonctions de test
        function updateStatus(elementId, message, isSuccess) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = `feature-status ${isSuccess ? 'status-success' : 'status-error'}`;
        }
        
        function testComparator() {
            try {
                if (window.pokemonComparator) {
                    window.pokemonComparator.showModal();
                    updateStatus('comparator-status', '‚úÖ Comparateur initialis√© avec succ√®s !', true);
                } else {
                    updateStatus('comparator-status', '‚ùå Comparateur non disponible', false);
                }
            } catch (error) {
                updateStatus('comparator-status', `‚ùå Erreur: ${error.message}`, false);
            }
        }
        
        function testHistory() {
            try {
                if (window.searchHistoryManager) {
                    // Ajouter un √©l√©ment de test
                    window.searchHistoryManager.addToHistory('pikachu', 'test');
                    window.searchHistoryManager.showModal();
                    updateStatus('history-status', '‚úÖ Historique initialis√© avec succ√®s !', true);
                } else {
                    updateStatus('history-status', '‚ùå Historique non disponible', false);
                }
            } catch (error) {
                updateStatus('history-status', `‚ùå Erreur: ${error.message}`, false);
            }
        }
        
        function testImageOptimization() {
            try {
                if (window.imageOptimizer) {
                    // Tester les statistiques d'optimisation
                    const stats = window.imageOptimizer.getOptimizationStats();
                    if (stats && typeof stats === 'object') {
                        updateStatus('image-status', `‚úÖ Optimiseur d'images fonctionnel ! (${stats.total} images analys√©es)`, true);
                    } else {
                        updateStatus('image-status', '‚ö†Ô∏è Optimiseur initialis√© mais aucune donn√©e', true);
                    }
                } else {
                    updateStatus('image-status', '‚ùå Optimiseur d\'images non disponible', false);
                }
            } catch (error) {
                updateStatus('image-status', `‚ùå Erreur: ${error.message}`, false);
            }
        }
        
        function testMinification() {
            try {
                if (window.assetMinifier) {
                    window.assetMinifier.getCompressionStats();
                    updateStatus('minify-status', '‚úÖ Minificateur d\'assets fonctionnel !', true);
                } else {
                    updateStatus('minify-status', '‚ùå Minificateur non disponible', false);
                }
            } catch (error) {
                updateStatus('minify-status', `‚ùå Erreur: ${error.message}`, false);
            }
        }
        
        function testCDN() {
            try {
                if (window.cdnManager) {
                    updateStatus('cdn-status', '‚úÖ CDN Manager disponible (d√©sactiv√© pour √©viter les erreurs)', true);
                } else {
                    updateStatus('cdn-status', '‚ùå CDN Manager non disponible', false);
                }
            } catch (error) {
                updateStatus('cdn-status', `‚ùå Erreur: ${error.message}`, false);
            }
        }
        
        // Test automatique au chargement
        document.addEventListener('DOMContentLoaded', function() {
            let successCount = 0;
            let totalFeatures = 5;
            
            // Test de disponibilit√© des fonctionnalit√©s
            if (window.pokemonComparator) successCount++;
            if (window.searchHistoryManager) successCount++;
            if (window.imageOptimizer) successCount++;
            if (window.assetMinifier) successCount++;
            if (window.cdnManager) successCount++;
            
            const generalStatus = document.getElementById('general-status');
            generalStatus.textContent = `${successCount}/${totalFeatures} fonctionnalit√©s disponibles`;
            generalStatus.className = `feature-status ${successCount === totalFeatures ? 'status-success' : 'status-error'}`;
        });
    </script>
</body>
</html>